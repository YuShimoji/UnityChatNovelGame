# Project Roadmap: Chat Novel Engine (Post-Pivot)

**更新日**: 2026-02-10  
**SSOT整合先**: `docs/GAME_DESIGN_DOCUMENT.md`  
**方針**: Vertical Slice優先 / チャットノベルエンジンのコア機能優先 / 物語テーマ分離（FoundPhone, Meta Horror）

---

## 1. 方針転換の要点

- 旧方針: テストカバレッジ拡充と仕様網羅を先行
- 新方針: まず「縦に切る」。最小の実プレイ導線を成立させる
- 対象: タイトル → チャット進行 → 分岐 → 待機 → セーブ/ロード
- ルール:
  - シナリオは手作り（自動生成しない）
  - テーマ依存機能はコアから分離
  - リソース管理はTBD（探索スレッドは可変化前提、バッテリーは当面除外）

---

## 2. 実行フェーズ（次タスク策定）

## Phase 0: スコープ固定（0.5-1日）

**目的**
- Vertical Sliceの実装対象を固定し、保留項目を明示する

**実装/作業項目**
- VS0-1: Vertical Slice対象機能の固定
- VS0-2: 非対象機能を「保留」に分類（推論系、重い演出、網羅テスト）
- VS0-3: サンプルストーリー1本の検証シナリオ範囲を固定

**成果物**
- 本ファイル（フェーズ定義）
- `AI_CONTEXT.md`（同期済み）
- 必要に応じて `docs/tasks/` にフェーズ別タスク起票

**完了条件**
- 「今回やる/やらない」がレビューで一意に判断できる

---

## Phase 1: 最小縦切り実装（2-4日）

**目的**
- プレイヤーが「通しで1回遊べる」最小導線を成立させる

**実装/作業項目**
- VS1-1: `ChatDialogueView` 正式実装（Yarn正式連携）
- VS1-2: チャット基礎UXの固定
  - 自動スクロール挙動
  - 入力ロック/解除
  - システムメッセージ
- VS1-3: 待機フロー（StartWait/SkipWait）の通し動作確認
- VS1-4: セーブ/ロードを縦切り導線に接続

**成果物**
- 実行可能な最小シナリオ（タイトル開始から一連の進行）
- 実機能に紐づくコマンドの動作確認記録

**完了条件**
- タイトルからエンドポイントまで例外なく進行できる
- セーブ/ロードで進行破綻しない

---

## Phase 2: スモーク検証基盤（1-2日）

**目的**
- 縦切り導線の回帰を最小コストで検知できる状態にする

**実装/作業項目**
- VS2-1: 「縦切りシナリオ破綻検知」用スモークテスト定義
- VS2-2: 最低限のEditMode/PlayModeチェックを追加
- VS2-3: 手動チェックリストを `docs/evidence/` 運用と接続

**成果物**
- スモークチェック項目（自動+手動）
- 失敗時の記録テンプレート

**完了条件**
- 主要導線の破綻を短時間で再現・検出できる

---

## Phase 3: エンジン可変化（2-4日）

**目的**
- テーマ別ストーリーを載せ替え可能なコア構成へ寄せる

**実装/作業項目**
- VS3-1: テーマ依存演出の設定分離（プロファイル化の下準備）
- VS3-2: シナリオ資産テンプレート整備（Yarn運用テンプレ）
- VS3-3: 探索スレッドのリソース項目をTBDのまま扱える設計整理
  - 候補は未定のまま保持
  - バッテリー管理は未導入を維持

**成果物**
- テーマ分離ガイド（実装メモ）
- シナリオ制作テンプレート

**完了条件**
- FoundPhone系とMeta Horror系を、コア改造なしで差し替え可能な構成方針が成立

---

## Phase 4: 拡張着手判断（以降）

**目的**
- Vertical Slice成立後に、初めて拡張開発へ進む

**候補項目**
- 連絡先リスト / add_contact / ChangeStatus
- Options / SafeArea最終調整
- オートセーブ強化
- Addressables移行計画

**ゲート条件**
- Phase 1-3の完了条件を満たしている
- スモーク検証で連続3回の導線成功

---

## 3. 優先順位ルール

1. 縦切り導線を壊すリスクの低減を最優先
2. コア機能に直結しない改善は後ろ倒し
3. テーマ依存の仕様追加は、分離可能な形でのみ許可
4. テストは「網羅性」より「導線破綻検知」を先に満たす

---

## 4. 保留・除外（現時点）

- 保留:
  - 探索スレッドの候補リソース詳細（TBD）
  - 重い演出仕様の本採用可否
- 当面除外:
  - バッテリー管理
  - 全面テストカバレッジ拡充を主目標にする計画

---

## 5. 進行管理メモ

- 進捗SSOT: `AI_CONTEXT.md`
- 仕様SSOT: `docs/GAME_DESIGN_DOCUMENT.md`
- 本ファイルは「次タスクの順序制御」に特化する
